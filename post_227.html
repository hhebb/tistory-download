<h1>무선 링크</h1>
<h2>채널</h2>
<ul>
<li>wi-fi 가 사용하는 주파수 대역에도 채널이 나뉘어져 있다.</li>
<li>각 AP 는 채널 하나를 골라서 통신한다.</li>
<li>AP 에 연결된 유저들은 AP 의 채널에 따라 통신한다.</li>
<li>그래서 collision domain 이 분리될 수 있다.</li>
<li>만약 AP 가 overlap 되면 CSMA/CA 를 따라 통신한다.</li>
</ul>
<h2>AP</h2>
<ul>
<li>한쪽은 무선, 한쪽은 유선 링크를 가지고 있다.</li>
<li>프로토콜도 2 가지를 써야하고, 프레임의 형태도 다르다.</li>
<li>라우터 입장에서 보면 AP 는 스위치로 인식. 즉 mac 이 없다.?</li>
<li>그런데 wi-fi 입장에서 보면 mac 도 있고 통신 대상으로 인식.</li>
</ul>
<h2>wi-fi 헤더</h2>
<ul>
<li>wi-fi 에서 AP 로 나갈 때 주소는 3개<br>  AP 의 MAC<br>  유저의 MAC<br>  라우터의 MAC</li>
<li>AP 에서 라우터로 나갈 때 주소는 2 개<br>  라우터의 MAC<br>  유저의 MAC</li>
<li>AP -&gt; 라우터 일 때, AP 는 마치 스위치 역할</li>
<li>처음에 주소가 3 개야 하는 이유?<br>  AP 는 링크 레이어 장비이므로 IP 를 이해할 수 없다.<br>  만약 src 와 라우터의 MAC 만 적어주면 아예 받을 수가 없다.<br>  만약 src 와 AP 의 MAC 만 적어주면 라우터로 보낼 수 없다.<br>  AP 의 성격 때문에 주소 3 개가 필요함.</li>
<li>AP 는 일종의 멀티플렉서<br>  모든 연결된 엔드 유저가 AP 를 통해서 송신하고<br>  AP 는 모든 엔드 유저에게 수신된 메세지를 보낸다.</li>
</ul>
<h2>과정</h2>
<ul>
<li>가장 먼저 AP 에 연결한다.<br>  이 때는 IP 를 모르지만 MAC 은 알 수 있다.<br>  라우터의 MAC 도 모르니까 브로드 캐스트<br>  데이터의 IP 주소에 src 는 비우고, dst 는 브로드 캐스트</li>
<li>DHCP 를 통해서 자신의 IP, 서브넷, 게이트웨이 IP, 로컬 DNS 등을 아는 것이 필요하다.</li>
<li>라우터의 IP 를 알아도 여전히 MAC 은 알 수 없다.<br>  이 때, ARP 쿼리를 통해 브로드 캐스트로 로우레벨 부터 채워서 보낸다.<br>  그리고 ARP 테이블을 채우고 정상적으로 통신하게 된다.<br>  사실 DHCP 만으로 ARP 쿼리를 안해도 저절로 알게 된다!</li>
</ul>
<h2>공유기 / AP</h2>
<ul>
<li>큰 기관 같은 곳에는 AP 를 따로 두어서 사용.<br>  단순하고 저렴하다.</li>
<li>가정용 공유기는 더 스마트한 것이다.<br>  AP 와 라우터/모뎀의 기능을 합친 것임.<br>  링크 레이어 뿐 아니라, 실제로 app 계층의 역할도 다 해준다.</li>
</ul>
<h2>나머지 헤더</h2>
<ul>
<li>Type - 2 bit<br>  RTS, CTS, ACK, data</li>
</ul>
<h2>이동 중 연결</h2>
<ul>
<li>무선 링크를 사용하며 이동(mobility) 중일 때 연결이 끊길까?</li>
<li>여기서 연결이란, TCP 까지 올라오는 IP 와 port 의 유지 여부.</li>
<li>동일한 라우터에 들어가 있기만 한다면 이동하여 AP 가 바뀌더라도 연결이 유지된다!</li>
<li>AP 와 스위치가 바뀌는것은 연결을 끊어버리지 않는다.</li>
<li>즉 같은 네트워크에 물려있으면 연결은 끊기지 않는다.</li>
<li>모바일 네트워크는 커버리지가 엄청 넓어서 전국 어디를 가더라도 연결이 끊기지 않는다.<br>  AP 가 촘촘히 박혀있다고 보면 된다.</li>
</ul>
