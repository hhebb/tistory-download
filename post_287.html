<h2>[11 장 ] - 스레드</h2>
<h2>프레세스 VS 스레드</h2>
<ul>
<li>프로세스를 만들면 커널 오브젝트를 만들어야함</li>
<li>그리고 실행중에 컨텍스트 스위칭이 생기게 된다.<ul>
<li>스레드의 성격에 따라 다르긴 하다.</li>
</ul>
</li>
<li>프로세스가 만들어지면 메모리에 code, data, heap, stack 이 생김</li>
<li>함수 호출에 해당하는 stack 은 공유하면 곤란해짐.</li>
<li>그래서 stack 이외의 다른 영역은 공유하고 stack 은 독립적으로 소유한다.</li>
<li>stack 은 곧 제어부분?</li>
<li>부모 프로세스의 메모리를 자식 스레드들이 공유한다.</li>
<li>stack 은 프로세스, 스레드들 모두 각자 소유한다.</li>
<li>스레드는 경량 프로세스.</li>
<li>프로세스 그 자체와 그것을 이루는 스레드를 모두 합쳐 프로세스라고 한다.</li>
</ul>
<h2>스레드 2</h2>
<ul>
<li>스레드는 프로세스의 함수를 호출할 수 있다.</li>
<li>스레드는 프로세스를 이루는 각각의 흐름.</li>
<li>멀티 스레드는 멀티 프로세스를 대체하기 위한것이 아니다.<ul>
<li>각자 다른 사용처가 있다.</li>
<li>멀티 프로세스는 자원을 공유하기 위해 IPC 를 사용.</li>
</ul>
</li>
<li>프로세스는 스레드가 돌아가는 환경, 스레드는 그 안에서 동작하는 주체.<ul>
<li>라고 정리??</li>
</ul>
</li>
</ul>
<h2>Window 에서 프로세스와 스레드</h2>
<ul>
<li>스케줄러는 프로세스의 상태 정보를 관리한다.</li>
<li>실행 상태정보는 프로세스가 아니라 스레드가 가지고 있다?</li>
<li>흐름의 단위가 스레드이므로.<ul>
<li>실행주체는 절대 프로세스가 아니라 스레드다.</li>
<li>기본적 프로세스는 메인 스레드가 항상 돌린다.</li>
</ul>
</li>
<li>사실 스레드를 명확하게 표현하기가 힘들다.<ul>
<li>무엇을 지칭해야하는지 어렵다.</li>
<li>그냥 흐름이라고 생각한다.</li>
<li>독립 스택과 스레드 코드가 있다는 정도만 알 것.</li>
</ul>
</li>
</ul>
<h2>커널 레벨 스레드, 유저 레벨스레드</h2>
<ul>
<li>스레드의 구현 모델 내용이다.</li>
<li>엄청 중요하다고 한다.</li>
<li>OS 마다 멀티 프로세스 지원 여부, 스레드 지원 여부가 다르다.<ul>
<li>이는 OS 커널이 지원하느냐 아니냐의 문제</li>
</ul>
</li>
<li>커널이 스레드를 지원하지 않으면 유저가 만들어서 쓰는 것이 유저 레벨 스레드.</li>
<li>커널이 스레드를 지원하면 스케줄러가 스레드를 관리한다.<ul>
<li>스케줄러는 그래서 스레드 정보를 가져야한다.</li>
</ul>
</li>
<li>커널이 스레드를 지원하지 않으면 스케줄러는 프로세스를 관리한다.<ul>
<li>사용자 라이브러리를 통해 커널 외부에서 스레드를 만든다.</li>
</ul>
</li>
<li>둘의 방식은 엄연히 동작방식이 다르다.<ul>
<li>특히 스레드 블락 등의 이벤트가 발생 시, 스케줄러의 동작이 달라진다.</li>
<li>스레드 지원이 되면 스레드 단위로 스케줄한다.</li>
<li>그렇지 않으면 프로세스 통째 단위로 스케줄하게 된다.</li>
</ul>
</li>
<li>유저 스레드는 대신 빠르다.</li>
</ul>
<h2>커널 모드 VS 유저 모드</h2>
<ul>
<li>윈도우는 커널 모드, 유저 모드 상태 둘 중 하나의 상태에 놓인다.</li>
<li>프로그램은 OS 커널 + APP</li>
<li>커널도 하나의 프로그램이라서 메모리에 올라간다.</li>
<li>동일한 SW 이긴 하지만 그래도 커널은 일반 APP 과는 다르다.</li>
<li>프로그램 실행 시 APP 이 커널 코드에 맵핑된 메모리를 건드리면 안된다.</li>
<li>그래서 모드를 나누어서 APP 이 커널을 건들지 못하게 한다.</li>
<li>제어권을 빠르게 주고 받는다.</li>
<li>커널 모드로 동작할 때<ul>
<li>스케줄러 동작시</li>
<li>프로세스 생성 시</li>
<li>어쨌든 커널코드가 동작할 땐 커널 모드로 빠져야한다.</li>
</ul>
</li>
</ul>
<h2>스레드의 컨텍스트 스위칭</h2>
<ul>
<li>커널 레벨 스레드가 지원되면 컨텍스트 스위칭이 빈번<ul>
<li>유저 모드에서 커널 모드로 전환이 빈번</li>
<li>그래서 속도에서 손해를 볼 수 있다.</li>
</ul>
</li>
</ul>
