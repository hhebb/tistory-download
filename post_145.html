<p># WAS(web application server)</p>
<hr>
<h2>클라이언트 서버 구조</h2>
<p>클라이언트는 서비스를 제공하는 서버에게 정보를 요청하여 응답 받은 결과를 사용한다.<br>웹이 대표적인 c-s 구조</p>
<h2>DBMS</h2>
<p>다수의 사용자들이 데이터베이스 내의 데이터를 접근할 수 있도록 해주는 sw<br>이전엔 파일에 일일히 저장했음.</p>
<h2>미들웨어</h2>
<p><div class="imageblock dual" style="text-align: center;"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td><img src="http://cfs.tistory.com/attach/4204798/kage@dIARUy/btqLGYP75xy/Y0pt7bWuRk9s46WU792dRk/img.png" ><p class="cap1">width="471" height="222" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent"</p></td><td><a href="https://weflug.tistory.com/attachment/"><img src="https://t1.daumcdn.net/tistory_admin/assets/blog/20201203185817/blogs/image/extension/unknown.gif?_version_=20201203185817" alt="" style="vertical-align: middle;" /> invalid-file</a></td></tr></table></div></p>
<p>dbms 가 클라이언트에 연결되어 동작하는 방식은 로직이 많아지면 비용이 많이 들어감.<br>단점이 많아서 이를 해결하기 위해 미들웨어가 등장함.<br>클라이언트와 dbms 사이의 또 다른 서버를 둔다.<br>미들웨어에서 비즈니스 로직을 돌려서 클라이언트는 입출력만 담당할 수 있다.<br>클라이언트는 dbms 가 아닌 미들웨어와 통신만 하면 된다.</p>
<h2>WAS</h2>
<p>일종의 미들웨어로 웹 클라이언트의 요청 중 보통 웹 앱이 동작하도록 지원하는 목적을 가진다.<br>업무를 처리하는 로직을 수행<br>프로그램 실행 환경과 db 접속 기능 제공<br>여러개의 트랜잭션 관리 (논리적인 작업 단위)<br>was 는 웹 서버의 기능도 수행하므로 별도로 웹 서버를 설치하지 않아도 구동 가능</p>
<h2>웹 서버 vs WAS</h2>
<p><div class="imageblock dual" style="text-align: center;"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td><img src="http://cfs.tistory.com/attach/4204798/kage@M51D0/btqLE2MwF9W/u2dul1baEirEJ4893ulL51/img.png" ><p class="cap1">width="602" height="381" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent"</p></td><td><a href="https://weflug.tistory.com/attachment/"><img src="https://t1.daumcdn.net/tistory_admin/assets/blog/20201203185817/blogs/image/extension/unknown.gif?_version_=20201203185817" alt="" style="vertical-align: middle;" /> invalid-file</a></td></tr></table></div></p>
<p>웹 서버는 정적인 결과, WAS 는 동적인 결과를 브라우저에게 전송한다.<br>동적인 컨텐츠는 프로그램이 구동된 결과.<br>WAS 내장 웹 서버도 정적이 컨텐츠 처리하는데 충분함.<br>하지만 규모가 커질수록 둘을 분리한다.<br>서버가 WAS 앞단에 위치함<br>웹 서버는 단순한 구조임.<br>무중단 서비스, 장애극복 기능(failover) 를 위해 분리</p>
<h1>실습 관련</h1>
<hr>
<p>웹 서버(아파치) - WAS(톰캣) - 웹 앱(서블릿)<br>서블릿은 URL 요청을 처리하는 프로그램 정도로 이해한다.<br><a href="http://url/%EC%84%9C%EB%B8%94%EB%A6%BF%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/mapping">http://url/서블릿프로젝트/mapping</a> 값<br>서블릿을 돌리면 내부적으로 톰캣을 실행한다.</p>
<h1>서블릿이란</h1>
<hr>
<h2>자바 웹 앱</h2>
<p>WAS(톰캣) 에 설치되어 동작하는 어플리케이션<br>WAS 에 의해서 동작이 되는 프로그램이다.<br>웹 앱은 html, css, 이미지, 서블릿, 패키지, 인터페이스 등이 포함됨.</p>
<h2>자바 웹 앱 폴더 구조</h2>
<p><div class="imageblock dual" style="text-align: center;"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td><img src="http://cfs.tistory.com/attach/4204798/kage@tOJUj/btqLENWhznd/DNr16aABu4xqlIEo2KkIHK/img.png" ><p class="cap1">width="602" height="219" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent"</p></td><td><a href="https://weflug.tistory.com/attachment/"><img src="https://t1.daumcdn.net/tistory_admin/assets/blog/20201203185817/blogs/image/extension/unknown.gif?_version_=20201203185817" alt="" style="vertical-align: middle;" /> invalid-file</a></td></tr></table></div></p>
<p>웹 앱의 구조는 규약들을 지켜야함.<br>이클립스에서 클래스 폴더의 파일은 보이지 않는다???</p>
<h2>서블릿</h2>
<p>자바 웹 앱 구성요소 중 종적인 처리를 하는 프로그램<br>서블릿은<br>WAS 에서 동작하는 자바 클래스<br>httpServlet 클래스를 상속받아야 한다.<br>서블릿과 JSP 로부터 최상의 결과를 얻으려면 2 가지를 조화롭게 사용해야 한다. - 웹 구성화면은 JSP 로 표현, 복잡한 코딩은 서블릿으로 표현</p>
<h2>서블릿 작성방법</h2>
<ul>
<li>3.0 이상에서 사용<br>서블릿 등록을 자바 어노테이션을 사용<br>서블릿 요청 이름을 바꾸려면 그냥 어노테이션에서 수정하면 됨<br>등록 때 web.xml 파일을 사용하지 않음</li>
<li>2.0 이하에서 사용<br>서블릿을 등록할 때 web.xml 을 작성해야함.<br>이 xml 파일은 실제 실행할 서블릿 이름을 매칭하여 등록해준다.?<br>서블릿 요청 이름을 바꾸려면 xml 에서 수정해야함.</li>
</ul>
<h2>서블릿 라이프사이클</h2>
<p><div class="imageblock dual" style="text-align: center;"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td><img src="http://kage.tistory.com/image/D" ><p class="cap1">width="602" height="391" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent"</p></td><td><a href="https://weflug.tistory.com/attachment/"><img src="https://t1.daumcdn.net/tistory_admin/assets/blog/20201203185817/blogs/image/extension/unknown.gif?_version_=20201203185817" alt="" style="vertical-align: middle;" /> invalid-file</a></td></tr></table></div></p>
<p>서블릿은 서버의 메모리에 서블릿 객체가 없으면 체크해서 생성한다.<br>객체를 여러개 만들지 않는다.<br>객체가 이미 있으면 service 메서드만 호출<br>서비스에서 대부분의 작업을 작성해야 한다.</p>
<h2>service 메서드</h2>
<p>클래스에 이미 구현되어 있는데, doGet, doPost 오버라이드 하면 이것을 호출함.<br>오버라이드 안하면 service 를 호출한다.</p>
<h2>동적인 페이지</h2>
<ul>
<li>서블릿에 URL 직접 입력하거나 링크 클릭<br>  GET 요청<br>  doGet 메서드 호출  </li>
<li>form 에 post 방식으로 전달<br>  POST 요청<br>  doPost 호출<br>  같은 URL 에서 다른 응답을 줄 수 있다는 것이 동적 페이지 의미</li>
<li>요청과 응답<br>  WAS 는 브라우저로부터 서블릿 요청을 받으면<br>  response, request 객체를 만들고 서블릿에게 파라미터로 전달한다..<br>  response 는 클라리언트에게 전달할 메세지<br>  request 는 클라이언트 정보</li>
</ul>
<h2>HttpServletRequest</h2>
<p>resuqst 정보를 서블릿에게 전달하기 위한 목적<br>헤더, 파라미터, 쿠키 등 모든 정보를 담는다.<br>body stream 읽어들이는 메서드를 포함.</p>
<h2>HttpServletResponse</h2>
<p><div class="imageblock dual" style="text-align: center;"><table cellspacing="5" cellpadding="0" border="0" style="margin: 0 auto;"><tr><td><img src="http://kage.tistory.com/image/53" ><p class="cap1">width="602" height="143" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent"</p></td><td><a href="https://weflug.tistory.com/attachment/"><img src="https://t1.daumcdn.net/tistory_admin/assets/blog/20201203185817/blogs/image/extension/unknown.gif?_version_=20201203185817" alt="" style="vertical-align: middle;" /> invalid-file</a></td></tr></table></div></p>
<p>WAS 는 어떤 클라이언트가 요청을 보냈는지 알고 있고, 해당 클라이언트에게 응답을 보내기 위한 객체를 생성해 서블릿에게 전달<br>contetn type, 응답코드, 응답 메세지 등을 전송하는 객체</p>
