<h1>무선링크</h1>
<h2>무선 링크</h2>
<ul>
<li>과거에는 유선 이더넷 링크만 있었음.</li>
<li>기술의 발달로 무선 링크가 등장.</li>
<li>무선 링크도 링크 레이어의 프로토콜을 사용한다.</li>
<li>무선 링크도 공기 중에서 충돌이 발생할 수 있으므로 공유된 미디엄 환경에서 작동한다.</li>
</ul>
<h2>wireless / mobility</h2>
<ul>
<li>말 그대로 선이 없으면 wireless</li>
<li>이동이라고 하면 AP 를 바꾸거나 서브넷이 바꾸는 개념</li>
<li>무선이라고 모두 모빌리티는 아니다.</li>
<li>폰, 태블릿 등은 모빌리티, 와이 파이는 무선 의 개념</li>
</ul>
<h2>무선 링크 종류</h2>
<ul>
<li>Wi-Fi</li>
<li>3G, 4G 등 모바일 링크</li>
</ul>
<h2>무선 개념</h2>
<ul>
<li>나머지 부분은 기존의 이더넷과 동일. 모두 동일한 유선 링크.</li>
<li>엔드 유저, 첫 hop 만 무선.</li>
</ul>
<h2>무선 링크 속도 비교</h2>
<ul>
<li>802.xx 는 흔히 와이파이로 속도는 indoor 용 (길어봤자 반경이 30 m)<br>  점점 속도는 빨라진다.</li>
<li>하지만 모바일 네트워크는 장거리. 3G, 4G</li>
</ul>
<h2>무선 링크 구분</h2>
<ul>
<li>infrastructure 여부 - 와이파이의 경우, AP</li>
<li>multi hop 여부</li>
<li>대부분 인프라 있으면서 single hop</li>
</ul>
<h2>무선 링크 특성</h2>
<ul>
<li>전파가 공기를 타고 나감<br>  이더넷은 전선 피복에 의해 보호되어서 안정적임.<br>  거리가 멀어져도 신호세기가 일정함.<br>  무선은 거리가 멀어짐에 따라 지수적으로 신호세기가 감소한다.<br>  그리고 외부 간섭도 심해진다.<br>  게다라 와이파이는 공유 대역이라서 전자렌지에도 간섭받음.</li>
<li>전송 반경이 더 작음<br>  이더넷 처럼 CSMA/CD 를 사용할 수 없다.<br>  전송하는지 안하는지 알 수 없으므로.<br>  이런 현상을 <code>hidden tunnel problem</code> 이라고 한다.</li>
<li>collision 감지가 불가능.<br>  자신의 신호는 크게 감지하지만 상대 신호는 거의 안들림.<br>  그래서 충돌 감지를 못함.</li>
<li>그래서 CSMA/CD 말고 다른 방식을 사용해야 함.</li>
</ul>
<h2>와이파이 - IEEE 802.11</h2>
<ul>
<li>무선이지만 유선 링크의 성능에 가깝게 가겠다는 의미.<br>  데이터 전송량의 발전을 보면 대충 맞아감.</li>
</ul>
<h2>와이파이 아키텍처</h2>
<ul>
<li>AP (access point) 가 이더넷 링크로 스위치에 연결됨.</li>
<li>사용자는 AP 에 무선으로 연결된다.</li>
</ul>
<h2>스캐닝</h2>
<ul>
<li>AP 들은 beacon 에 자신의 정보를 담아서 주기적으로 브로드캐스트 한다.<br>  초당 10 번 정도로 빠르게.</li>
<li>사용자들은 그 브로드캐스트 신호를 받아볼 수 있다.</li>
<li>신호 세기도 알 수 있어서 가장 강한 것을 골라 연결할 수 있다.</li>
<li>이를 passive scanning 이라고 한다.</li>
</ul>
<h2>와이파이의 맥 프로토콜</h2>
<ul>
<li>모든 사용자는 결국 AP 와 통신을 하게 된다.<br>  AP 와 frame 을 주고 받는다.</li>
<li>기존의 CSMA/CD 는 사용 불가.<br>  신호를 듣지도 못하고 충돌 감지도 못한다.<br>  재전송을 할 수가 없다.<br>  이더넷에서는 스스로 충돌 감지가 가능해서 ACK 가 없음을 기억. (사실상 유실은 없기도 하다.)</li>
<li>어쩔 수 없이 ACK 개념이 필요하다.<br>  스스로 충돌감지를 못하므로 필요함.<br>  TCP 에서의 ACK 와는 전혀 다름.</li>
</ul>
<h2>CSMA/CA - Carrier Sense Multiple Access / Collision Avoid</h2>
<ul>
<li>collision 을 감지하는 것이 아닌 회피.</li>
<li>carrier sense 일정시간 동안 하며 조용하면 데이터 송신</li>
<li>보내고 수신자로부터 ACK 를 받으면 다음 데이터를 준비.</li>
<li>만약 ACK 가 오지 않았다면 재전송을 한다.</li>
<li>그리고 누군가 통신하고 있다면 이더넷과 마찬가지로 기다렸다가 동작.</li>
</ul>
<h2>이더넷과 차이점</h2>
<ul>
<li>이더넷은 충돌 감지하면 바로 중지함.</li>
<li>무선은 충돌을 감지하지 못하므로 중지라는 개념없이 일단 전송하고 본다.</li>
<li>그래서 공유되는 미디엄을 낭비함. - 피해가 큼.</li>
</ul>
<h2>RTS-CTS (Ready To Send, Clear To Send) 프레임</h2>
<ul>
<li>무선은 충돌 다 무시하고 그냥 다 전송.</li>
<li>재전송에 사용되는 데이터 낭비가 심할 수 있음.</li>
<li>이 피해를 최소화하기 위해 도입한 개념.</li>
<li>전송할 때 carrier sense 하기 전에 작은 크기의 특별한 컨트롤 프레임을 보낸다. (RTS)</li>
<li>RTS 를 받으면 AP 는 CTS 를 보내야 함.</li>
<li>그런데 충돌나서 섞인 신호를 AP 가 받으면 해석 못해서 가만히 있음.</li>
<li>사용자는 CTS 를 못 받으면 충돌이라고 인지한다.</li>
<li>그리고 이더넷처럼 랜덤 back off 를 하고 다시 보냄.</li>
<li>만약 RTS 가 AP 에 정상적으로 도달하면 CTS 를 보낸다.</li>
<li>RTS 는 브로드 캐스트 이므로 그 사용자 반경의 유저도 다 듣는다.</li>
<li>CTS 도 브로드 캐스트 이므로 AP 반경의 유저도 다 듣는다.</li>
<li>RTS, CTS 모두 특정한 정보(특정 기간 동안 점유)를 담고 있어서 다른 유저는 기다리게 된다.</li>
<li>carrier sense 했을 때 조용해도 다른 유저의 CTS 를 받은 상태라면 전송을 안한다.</li>
<li>이 기간동안 절전해도 된다.</li>
</ul>
<h2>신호 꼬일 때</h2>
<ul>
<li>만약 AP 가 어떤 유저에 대한 CTS 를 보낼 때 다른 유저가 그걸 받기 전에 RTS 를 보낼 때</li>
<li>그 다른 유저 근처에 있는 엔드 유저들은 신호가 섞여서 CTS 를 못 듣고 쓰레기 신호를 듣는다.</li>
<li>조용하다고 판단한 다른 유저가 RTS 를 보내는 순간 통신을 허락받은 유저의 메세지가 통으로 날라오면 결국 충돌됨.</li>
<li>최초 허락받은 유저는 결국 ACK 를 받지 못할것이고 back off 하여 다시 RTS 경쟁</li>
<li>wi-fi 링크에서는 끝없이 RTS 경쟁을 하게 된다.</li>
<li>정상적으로 진행되더라도 신규 유저가 들어오면 충돌날 수 있다.</li>
<li>와이파이에서 재전송은 횟수가 정해져있다.<br>  만약 누락된 데이터는 결국 TCP 에서 재전송 메커니즘에 의해 다시 새로운 데이터를 요청하여 전송하게 한다.</li>
</ul>
<h2>와이파이 헤더</h2>
<ul>
<li>주소가 4 개가 쓰임.</li>
<li>3 개가 주로 사용됨.</li>
<li>dst(라우터), src 외에 AP 의 맥 주소가 필요.</li>
<li>AP 는 유선, 무선 둘 다 거쳐있는 링크 레이어 장비.</li>
<li>한 번에 보내면 안되나? 굳이 주소를 3 개 보내야하는 이유는?</li>
<li>공유기는 AP 와 다른것은?</li>
</ul>
