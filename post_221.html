<h1>링크 계층</h1>
<ul>
<li>브로드캐스트 미디엄을 어떻게 컨드롤 할 것인가가 가장 중요한 작업. MAC</li>
<li>가장 많이 쓰는 것은 CSMA/CD</li>
<li>링크 레이어는 모두 MAC 프로토콜을 사용한다.</li>
</ul>
<h2>LAN - Local Area Network</h2>
<ul>
<li>subnet 은 게이트웨이를 거치지않고 통신할 수 있는 것이고 그들은 LAN 으로 연결되어 있다.</li>
<li>공유 미디엄으로 이루어진 네트워크를 지칭한다.</li>
</ul>
<h2>Ethernet</h2>
<ul>
<li>LAN 을 링크로 사용함. 이더넷 링크라고 한다.</li>
<li>과거에는 bus 형태, 최근에는 switch 를 통해서 방사형으로 구성.</li>
<li>이더넷 프레임<br />header 와 data 로 이뤄짐.<br />type - 프로토콜 명시. 주로 IP<br />기타 필드들..</li>
<li>이더넷 링크는 CSMA/CD MAC 프로토콜을 사용한다.<br />이 프로토콜의 재전송과 TCP 사이의 재전송의 차이를 명확히 알고 있어야 함.<br />총돌의 경우에만 재전송하므로 충돌만 없다면 무조건 전송 성공이다.(단, 유선상황에서)<br />그래서 게이트웨이가 피드백이 필요없다.</li>
<li>만약에 충돌을 감지하지 못하면?<br />CSMA/CD 에선 큰 문제다.<br />propagation delay 때문에 생긴다.<br />보내는 신호가 너무 작으면 시간 차 때문에 충돌감지를 못할 수 있다.<br />이를 해결하기 위해 일정크기 이상의 데이터를 보낸다. (64 bit)<br />64 bit 이상 보내면 어느경우라도 충돌을 감지할 수 있다.<br />데이터 크기가 작더라도 억지로 패딩을 넣어서 전송한다.</li>
</ul>
<h2>MAC 주소</h2>
<ul>
<li>링크 레이어에서만 쓰이는 주소</li>
<li>48 bit 크기<br />앞의 24 bit 는 제조사, 뒤의 24 bit 는 고유 번호</li>
<li>사람의 주소와 대응<br />이름 - host name. 바꿀 수 있다.<br />집 주소 - IP 주소. 물리적으로 이동하면 바꿀 수 있다.<br />주민번호 - MAC 주소. 왠만하면 못 바꾼다.</li>
<li>공장에서 NIC 만들 때 찍어나오는 그 자체의 고유의 번호다.</li>
<li>frame 의 src, dst 주소로 쓰인다.</li>
<li>src 의 MAC 을 바꾸면 해킹 가능</li>
<li>dst 는 게이트웨이 라우터의 MAC 주소가 되어야 한다.<br />DHCP 를 통해 라우터의 IP 를 알 수 있다.<br />하지만 MAC 은 알 수 없다.</li>
<li>하나의 라우터에 NIC 가 여러개일 땐 들어올 때, 나갈 때MAC 이 바뀐다.</li>
</ul>
<h2>ARP table - Address Resolution Protocal</h2>
<ul>
<li>사용자의 컴퓨터의 저장되어 있음.</li>
<li>IP 주소와 MAC 주소의 매핑 테이블</li>
<li>게이트웨이의 IP 를 알면 MAC 주소를 알 수 있다.</li>
<li>처음에는 이 엔트리가 없는데 이를 채우는것이 ARP 프로토콜이다.</li>
<li>이는 ARP request 를 통해 수행한다.<br />frame 을 브로드캐스트로 보낸다.<br />프레임에 게이트웨이의 IP 를 담아서 보낸다.<br />게이트웨이는 자신의 MAC 을 담아서 보내준다.</li>
<li>테이블에 TTL 필드도 있는데 이 기간동안 인식없이 사용할 수 있게 하는 캐싱용이다.<br />하지만 만료기간이 지나면 갱신해야 한다.</li>
</ul>