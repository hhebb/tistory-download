<h1>링크 레이어</h1>
<h2>큰 그림</h2>
<ul>
<li>한 호스트가 메시지를 보낼 때 먼저 포워딩 테이블의 ip 를 보고 다음 hop 을 결정한다.<br>  이 테이블은 내부 AS 에서는 최단거리로 구하고 외부에서는 다른 방식으로 결정.</li>
<li>그리고 링크레이어에 와서 ARP 테이블을 참조하여 다음 hop 의 MAC 주소를 참조한다.<br>  없다면 ARP 쿼리를 날리게 된다.<br>  하지만 한 번이라도 호스트끼리 상호작용한다면 당연히 채워지게 된다. TTL 있으면 쿼리 필요.</li>
<li>CSMA/CD 프로토콜로 프레임을 전송한다. </li>
<li>반복적으로 수행하여 목적지까지 도착한다.</li>
</ul>
<h2>스위치</h2>
<ul>
<li>과거에는 bus 형태로 ethernet 을 구성했음</li>
<li>요즘은 스위치라는 장비를 이용해 편리하게 구성</li>
<li>bus 는 전체가 하나의 미디엄이지만 스위치는 collision domain 을 분리한다.<br>  충돌이 적어지게 된다.<br>  domain 이 다른 호스트는 동시에 전송이 가능하게 해준다.</li>
<li>스위치는 호스트에게 인지되지 않는다.<br>  호스트는 하던대로 CSMA/CD 하기만하면 된다.<br>  어떠한 네트워크 id 도 없이 교통정리만 해주는 장비이다.</li>
</ul>
<h2>스위치 특징</h2>
<ul>
<li>다중 동시 전송</li>
<li>동시에 송신 가능.<br>  교통정리가 필요하긴 하다.</li>
<li>스위치 테이블 존재<br>  목적지 찾아갈 수 있도록 스위치 테이블이 존재해야 한다.</li>
<li>스위치 테이블 작성<br>  self-learning 을 하며 테이블을 작성하게 된다.<br>  src 의 포트를 알게 된다.<br>  처음엔 테이블이 없어 어딘지모르면 어쩔 수 없이 브로드캐스팅(플러딩) 한다.<br>  어쩌다가 dst 의 포트를 알게 되면 다음부터는 바로 연결해준다.<br>  점차 테이블이 채워지면 이후에는 직통으로 간다.<br>  TTL 되면 다시 플러딩<br>  사실 한 두번만 가면 기록(자가 학습)이 된다.</li>
<li>(주의) - 호스트끼리 통신할 일은 거의 없음. 모두 라우터를 거치게 된다.</li>
</ul>
<h2>interconnecting switch</h2>
<ul>
<li>스위치를 여러개 이어붙인다.</li>
<li>특별한것은 아니고 그저 호스트를 늘리는 것 이상 아니다.</li>
<li>프로토콜에서의 역할은 전혀하지 못하므로.</li>
<li>스위치의 존재이유는 성능 향상이다.</li>
<li>네트워크 관점에서는 그저 갯수가 늘어나는 것임.</li>
</ul>
<h2>현실적인 네트워크</h2>
<ul>
<li>수많은 호스트들이 라우터에 연결되어 있지만 이는 개념적인 것이다.</li>
<li>실제로는 수많은 스위치에 호스트가 직접적으로 연결되고 라우터는 스위치와 연결된다.</li>
</ul>
<h2>공유기 vs 스위치</h2>
<ul>
<li>모뎀까지는 통신사에서 제공한다.</li>
<li>모뎀은 보통 라우터 역할을 하며 고유 IP 하나를 가진다.</li>
<li>공유기는 모뎀에 연결되어 NAT 가 동작되어 내부 네트워크를 구성해준다.<br>  DHCP 도 동작한다.<br>  subnet 을 구성해준다.</li>
<li>공유기는 app 계층까지 구현되어있는 하나의 컴퓨터다!</li>
<li>기관에서 사용되는 라우터와 유사한 구조로 네트워크가 구성되는데, 공유기는 모뎀이라는 라우터와 또 연결된다.<br>  라우터의 역할을 하기도 하며 app 계층까지 담당하는 프로세서.</li>
<li>호스트가 늘어나면 라우터(공유기) 를 늘리거나 스위치를 늘리면 된다.</li>
<li>라우터를 늘리면 라우팅이 추가적으로 일어나고 스위치를 달면 스위칭이 발생한다.</li>
<li>더 단순한 것은 스위치.</li>
</ul>
<h2>데이터 센터</h2>
<ul>
<li>대형 인터넷 회사들은 수많은 서버를 가진다.</li>
<li>이 모두를 계층화된 스위치로 연결한다.</li>
</ul>
<h2>MAC, IP</h2>
<ul>
<li>IP 는 회선, MAC 은 장비</li>
</ul>
